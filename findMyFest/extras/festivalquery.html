
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Find My Fest</title>
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <link rel="icon" type="image/png" href="images/8thnote.png">
        <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
        <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
         <link href='https://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
        <meta name='description' content='Discover your new favorite music festival with Find My Fest.'>
    </head>
    <body>
        <div id="artistHeader">
	        <div id="logo-header">
                <a href="index.html"><img src="images/8thnote.png" alt="Find My Fest" width="40" height="40" border="0"></a>
            </div>
            <h2>Just for you...</h2>
            <h3>based on Drake</h3>
	    </div>
        <div id="discovery-tiles">
        </div>
        <div>    
            <center><a href="allFests.html" class="myButton">View All Festivals</a></center>
        </div>
        <script type="text/javascript" src="js/findMyFest.js"></script>
        <script>
            console.log("this is the query string")
            console.log(window.location.search)
            console.log("You selected artist....  "+getQueryStringValue('artist'))

            //parse the artist that was selected
            var selectedArtist = getQueryStringValue('artist')
            
            //get the artist object
            var artistObj = getArtistObj(selectedArtist)

            console.log(artistObj)

            //get the similar artists

            //search the festivals for the similar artists and the artist
            //make an array for the festivals that match...eg.
            // var matchingFestivals = []
            // matchingFestivals.push(festivalObj)
            
            //Clear the html ofthe discovery-tiles
            // $('discovery-tiles').clear()

            //for each matching festival call your jquery magic and append to discovery-tiles
            //e.g.

            var $div = $("<div/>")
            $div.addClass("tile")
            var $a = $("<a/>")
            $a.attr("href",festivalObj.url)

            $div.append($a)
            $('#discovery-tiles').append($div)

            

    /**
        Solution from StackExchange: http://stackoverflow.com/questions/9870512/how-to-obtaining-the-querystring-from-the-current-url-with-javascript
    */

            function getQueryStringValue (key) {  
              return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
            }  

            //REMEMBER NAME is the string that you are passing in through the html query parameter

            function getFestivalObj(name) {
                //for every artist in the artist list check the name property to see if it equals the name
                // that you are passing in..

                for(var i=0; i < festival.length; i++) {
                    if(festival[i].name.toLowerCase() === name) {
                        return festival[i]
                    }
                }
                
                return null
            }            
        </script>
    </body>
</html>




